# ButterNovel ç§»åŠ¨ç«¯ App å¼€å‘è®¡åˆ’

> çŸ­ç¯‡å°è¯´é˜…è¯»ä¸åˆ›ä½œå¹³å° - Google Play & App Store

**ç‰ˆæœ¬**: 4.0
**æ›´æ–°æ—¥æœŸ**: 2025-12-23
**ç›®æ ‡**: æ‰“é€ æŠ–éŸ³å¼çŸ­ç¯‡å°è¯´ä½“éªŒ

---

## ç›®å½•

1. [äº§å“å®šä½](#äº§å“å®šä½)
2. [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
3. [æŠ€æœ¯æ–¹æ¡ˆ](#æŠ€æœ¯æ–¹æ¡ˆ)
4. [ä»£ç å¤ç”¨åˆ†æ](#ä»£ç å¤ç”¨åˆ†æ)
5. [å¼€å‘é˜¶æ®µè¯¦è§£](#å¼€å‘é˜¶æ®µè¯¦è§£)
6. [æ¨é€é€šçŸ¥ç³»ç»Ÿ](#æ¨é€é€šçŸ¥ç³»ç»Ÿ)
7. [æµ‹è¯•ç­–ç•¥](#æµ‹è¯•ç­–ç•¥)
8. [API è®¾è®¡](#api-è®¾è®¡)
9. [ä¸Šæ¶å‡†å¤‡](#ä¸Šæ¶å‡†å¤‡)

---

## äº§å“å®šä½

### ç›®æ ‡ç”¨æˆ·

- å–œæ¬¢ç¢ç‰‡åŒ–é˜…è¯»çš„å¹´è½»ç”¨æˆ·
- æƒ³è¦åˆ†äº«è‡ªå·±æ•…äº‹çš„åˆ›ä½œè€…
- å…¨çƒè‹±è¯­ç”¨æˆ·ç¾¤ä½“

### æ ¸å¿ƒç‰¹ç‚¹

| ç‰¹ç‚¹ | è¯´æ˜ |
|------|------|
| åªåšçŸ­ç¯‡ | 5,000-20,000 å­—çš„å®Œæ•´æ•…äº‹ |
| æŠ–éŸ³å¼æ¨è | For You å‚ç›´æ»‘åŠ¨æµè§ˆ |
| äººäººå¯åˆ›ä½œ | ä¸€ä¸ªè´¦å· = è¯»è€… + ä½œè€… |
| ç¤¾äº¤å±æ€§ | å…³æ³¨ã€ç‚¹èµã€è¯„è®ºã€åˆ†äº« |

### ä¸ Web ç«¯å·®å¼‚

| Web ç«¯ | ç§»åŠ¨ç«¯ |
|--------|--------|
| é•¿ç¯‡ + çŸ­ç¯‡ | åªåšçŸ­ç¯‡ |
| ç« èŠ‚åˆ¶ | å®Œæ•´æ•…äº‹ |
| ç®¡ç†å‘˜ä¸Šä¼  | ç”¨æˆ·è‡ªä¸»åˆ›ä½œ |
| ä¼ ç»Ÿåˆ—è¡¨æµè§ˆ | æŠ–éŸ³å¼æ»‘åŠ¨æ¨è |

---

## æ ¸å¿ƒåŠŸèƒ½

### åº•éƒ¨å¯¼èˆª (5 Tabs)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ For You â”‚Followingâ”‚   â•    â”‚Bookshelfâ”‚ Profile â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tab 1: For You (æ¨è)

**äº¤äº’è®¾è®¡**:
- å…¨å±å¡ç‰‡å¼æµè§ˆ
- ä¸Šæ»‘ä¸‹ä¸€ä¸ªï¼Œä¸‹æ»‘ä¸Šä¸€ä¸ª
- å³ä¾§æ“ä½œæ ï¼ˆâ¤ï¸ ğŸ’¬ ğŸ“š â†—ï¸ï¼‰
- ç‚¹å‡»å¡ç‰‡è¿›å…¥é˜…è¯»å™¨
- é¡¶éƒ¨æœç´¢å…¥å£
- ä¸‹æ‹‰åˆ·æ–°

**æ¨èç®—æ³•**:
```
ç”¨æˆ·å…´è¶£æ ‡ç­¾     30%
é˜…è¯»å†å²ç›¸ä¼¼     25%
ç‚¹èµæ”¶è—ç›¸å…³     20%
çƒ­é—¨è¶‹åŠ¿         15%
æ–°å‘å¸ƒå†…å®¹       10%
```

### Tab 2: Following (å…³æ³¨)

**åŠŸèƒ½**:
- å…³æ³¨ä½œè€…çš„æœ€æ–°å‘å¸ƒ
- æ—¶é—´çº¿å½¢å¼å±•ç¤º
- æœªè¯»çº¢ç‚¹æé†’
- ç‚¹å‡»ç›´æ¥è¿›å…¥é˜…è¯»

### Tab 3: Create (åˆ›ä½œ) â•

**åŠŸèƒ½**:
- åˆ›å»ºæ–°çŸ­ç¯‡
- ç®¡ç†å·²åˆ›ä½œä½œå“
- è‰ç¨¿ç®±
- ä½œå“æ•°æ®ç»Ÿè®¡

**åˆ›ä½œæµç¨‹**:
```
1. å¡«å†™æ ‡é¢˜
2. é€‰æ‹©åˆ†ç±»/æ ‡ç­¾
3. ä¸Šä¼ å°é¢ï¼ˆå¯é€‰ï¼‰
4. ç¼–å†™å†…å®¹
5. é¢„è§ˆ
6. å‘å¸ƒ/å­˜è‰ç¨¿
```

### Tab 4: Bookshelf (ä¹¦æ¶)

**åŠŸèƒ½**:
- æ”¶è—çš„æ•…äº‹
- é˜…è¯»å†å²
- é˜…è¯»è¿›åº¦
- ç»§ç»­é˜…è¯»

### Tab 5: Profile (æˆ‘çš„)

**åŠŸèƒ½**:
- ä¸ªäººèµ„æ–™ç¼–è¾‘
- é˜…è¯»ç»Ÿè®¡
- åˆ›ä½œç»Ÿè®¡
- è®¾ç½®å…¥å£
- é€šçŸ¥ä¸­å¿ƒ
- ç™»å‡º

### é˜…è¯»å™¨

**çŸ­ç¯‡ä¸“ç”¨è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back          Story Title    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚     [æ²‰æµ¸å¼é˜…è¯»å†…å®¹åŒºåŸŸ]         â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Aa   ğŸŒ™   ğŸ“–   ğŸ’¬              â”‚
â”‚ å­—ä½“  å¤œé—´  è¿›åº¦  è¯„è®º          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç™»å½•æ³¨å†Œ

**æ”¯æŒæ–¹å¼**:
- Google ç™»å½• â­
- Apple ç™»å½• â­ (iOS å¿…é¡»)
- Email + Password
- æ¸¸å®¢æ¨¡å¼ï¼ˆæœ‰é™åŠŸèƒ½ï¼‰

---

## æŠ€æœ¯æ–¹æ¡ˆ

### æŠ€æœ¯æ ˆ

```json
{
  "æ¡†æ¶": "Expo SDK 54",
  "æ ¸å¿ƒ": "React Native 0.81.5 + React 19.1",
  "è·¯ç”±": "Expo Router 6.0",
  "çŠ¶æ€": "@tanstack/react-query + zustand",
  "è¡¨å•": "react-hook-form + zod",
  "UI": "NativeWind (Tailwind CSS)",
  "ç‰¹æ•ˆ": "expo-blur (æ¯›ç»ç’ƒæ•ˆæœ)",
  "å­˜å‚¨": "expo-secure-store + async-storage",
  "è®¤è¯": "expo-auth-session",
  "æ¨é€": "expo-notifications + FCM/APNs",
  "å›¾ç‰‡": "expo-image + expo-image-picker"
}
```

---

## ğŸ¨ è®¾è®¡è§„èŒƒ (é‡è¦!)

### ä¸»é¢˜è‰²

```
ä¸»è‰²è°ƒ: è“è‰²ç³» (ç®€çº¦ã€é«˜ç«¯)
- primary: #3b82f6 (blue-500)
- primary-dark: #2563eb (blue-600)
- primary-light: #60a5fa (blue-400)

èƒŒæ™¯è‰²:
- bg-primary: #f8fafc (slate-50)
- bg-card: #ffffff with blur
- bg-dark: #0f172a (slate-900)

æ–‡å­—è‰²:
- text-primary: #0f172a (slate-900)
- text-secondary: #64748b (slate-500)
```

### è§†è§‰é£æ ¼

```
âœ… è¦çš„:
â”œâ”€â”€ ç®€çº¦ã€å¹²å‡€ã€é«˜ç«¯æ„Ÿ
â”œâ”€â”€ æ¯›ç»ç’ƒæ•ˆæœ (expo-blur)
â”œâ”€â”€ å¤§ç•™ç™½
â””â”€â”€ å¾®å¦™çš„é˜´å½±

âŒ ä¸è¦çš„:
â”œâ”€â”€ èŠ±å“¨çš„å›¾æ ‡
â”œâ”€â”€ è¿‡å¤šçš„é¢œè‰²
â”œâ”€â”€ ç½‘é¡µé£æ ¼çš„å¡ç‰‡åˆ—è¡¨
â””â”€â”€ é»„è‰²/butterè‰²è°ƒ
```

### For You é¡µé¢ (æŠ–éŸ³å¼å…¨å±)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚  â† å…¨å±ï¼Œä¸€æ¬¡ä¸€ä¸ªæ•…äº‹
â”‚                             â”‚
â”‚     æ•…äº‹æ ‡é¢˜                 â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚
â”‚                             â”‚
â”‚     æ•…äº‹ç®€ä»‹/é¢„è§ˆ...         â”‚
â”‚                             â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”                    â”‚  â† å³ä¾§æ‚¬æµ®æŒ‰é’®
â”‚  â”‚  â™¡  â”‚ ç‚¹èµ               â”‚
â”‚  â”‚ 123 â”‚                    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”‚
â”‚  â”‚  ğŸ’¬ â”‚ è¯„è®º               â”‚
â”‚  â”‚  45 â”‚                    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”‚
â”‚  â”‚  â˜†  â”‚ æ”¶è—               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                             â”‚
â”‚  [ å¼€å§‹é˜…è¯» ]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘ ä¸Šæ»‘åˆ‡æ¢ä¸‹ä¸€ä¸ªæ•…äº‹
```

### æ¯›ç»ç’ƒæ•ˆæœå®ç°

```typescript
import { BlurView } from 'expo-blur';

<BlurView intensity={80} tint="light">
  <View className="bg-white/70">
    {/* å†…å®¹ */}
  </View>
</BlurView>
```

### é¡¹ç›®ç»“æ„

```
mobile/
â”œâ”€â”€ app/                      # Expo Router é¡µé¢
â”‚   â”œâ”€â”€ _layout.tsx           # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ (tabs)/               # Tab å¯¼èˆª
â”‚   â”œâ”€â”€ auth/                 # è®¤è¯é¡µé¢
â”‚   â”œâ”€â”€ reader/               # é˜…è¯»å™¨
â”‚   â”œâ”€â”€ story/                # æ•…äº‹è¯¦æƒ…
â”‚   â”œâ”€â”€ author/               # ä½œè€…ä¸»é¡µ
â”‚   â”œâ”€â”€ create/               # åˆ›ä½œé¡µé¢
â”‚   â””â”€â”€ settings/             # è®¾ç½®é¡µé¢
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                   # åŸºç¡€ UI ç»„ä»¶
â”‚   â”œâ”€â”€ story/                # æ•…äº‹ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ reader/               # é˜…è¯»å™¨ç»„ä»¶
â”‚   â””â”€â”€ create/               # åˆ›ä½œç»„ä»¶
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api/                  # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•° (å¯ä» web å¤ç”¨)
â”‚   â””â”€â”€ validators/           # éªŒè¯é€»è¾‘ (å¯ä» web å¤ç”¨)
â”‚
â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ stores/                   # Zustand çŠ¶æ€
â”œâ”€â”€ services/                 # æ¨é€ç­‰æœåŠ¡
â”œâ”€â”€ assets/                   # å›¾ç‰‡/å­—ä½“
â””â”€â”€ __tests__/                # æµ‹è¯•æ–‡ä»¶
```

---

## ä»£ç å¤ç”¨åˆ†æ

### âœ… å¯ç›´æ¥å¤ç”¨ (ä» web/src/lib å¤åˆ¶)

| æ–‡ä»¶ | è¯´æ˜ | å¤ç”¨æ–¹å¼ |
|------|------|----------|
| `format.ts` | æ•°å­—æ ¼å¼åŒ– (1.5k, 2.3m) | ç›´æ¥å¤åˆ¶ |
| `validators.ts` | Zod éªŒè¯é€»è¾‘ | å¤åˆ¶ï¼Œç§»é™¤å›¾ç‰‡éªŒè¯éƒ¨åˆ† |
| `constants.ts` | åˆ†ç±»ã€çŠ¶æ€å¸¸é‡ | ç›´æ¥å¤åˆ¶ |
| `utils.ts` éƒ¨åˆ† | `generateSlug`, `formatDate`, `truncate` | ç›´æ¥å¤åˆ¶ |

**format.ts å¤ç”¨ç¤ºä¾‹**:
```typescript
// å¯ç›´æ¥å¤åˆ¶åˆ° mobile/lib/utils/format.ts
export function formatNumber(num: number): string {
  const rounded = Math.floor(Math.abs(num))
  if (rounded < 1000) return rounded.toString()
  if (rounded < 1000000) return `${(rounded / 1000).toFixed(1)}k`
  return `${(rounded / 1000000).toFixed(1)}m`
}
```

**validators.ts éƒ¨åˆ†å¤ç”¨**:
```typescript
// å¯å¤ç”¨çš„ Schema (å¤åˆ¶åˆ° mobile/lib/validators.ts)
export const ratingSchema = z.object({
  score: z.coerce.number().int().refine(
    (val) => [2, 4, 6, 8, 10].includes(val),
    { message: 'Rating must be one of: 2, 4, 6, 8, 10' }
  ),
  review: z.string().max(1000).optional(),
})

export const registerSchema = z.object({
  email: z.string().email('Invalid email format'),
  password: z.string().min(6).max(50),
  name: z.string().min(1).max(50).optional(),
})

export const profileUpdateSchema = z.object({
  name: z.string().min(1).max(50).optional(),
  bio: z.string().max(500).optional(),
})
```

### âš ï¸ éœ€è¦ä¿®æ”¹åå¤ç”¨

| æ–‡ä»¶ | è¯´æ˜ | ä¿®æ”¹ç‚¹ |
|------|------|--------|
| `validators.ts` | å›¾ç‰‡éªŒè¯ | ç§»é™¤ `window.Image`ï¼Œç”¨ expo-image-manipulator |
| API ç±»å‹å®šä¹‰ | TypeScript æ¥å£ | ç›´æ¥å¤ç”¨ï¼Œä½†éœ€åˆ›å»ºå¯¹åº”æ–‡ä»¶ |

### âŒ å¿…é¡»é‡å†™

| åŠŸèƒ½ | åŸå›  |
|------|------|
| æ‰€æœ‰ UI ç»„ä»¶ | React Native ä½¿ç”¨ View/Textï¼Œä¸æ˜¯ div/span |
| æ ·å¼ç³»ç»Ÿ | Tailwind â†’ NativeWind (è¯­æ³•ç•¥æœ‰ä¸åŒ) |
| å¯¼èˆªç³»ç»Ÿ | Next.js Router â†’ Expo Router |
| å­˜å‚¨é€»è¾‘ | localStorage â†’ AsyncStorage/SecureStore |
| è®¤è¯æµç¨‹ | NextAuth â†’ expo-auth-session |
| å›¾ç‰‡å¤„ç† | next/image â†’ expo-image |
| æ¨é€é€šçŸ¥ | æ—  â†’ expo-notifications (æ–°åŠŸèƒ½) |

### ç±»å‹å®šä¹‰å¤ç”¨

ä» web é¡¹ç›®æå–å¹¶å¤ç”¨çš„ç±»å‹å®šä¹‰ï¼š

```typescript
// mobile/lib/types.ts

// ç”¨æˆ·ç±»å‹
export interface User {
  id: string
  email: string
  name: string | null
  avatar: string | null
  bio: string | null
}

// çŸ­ç¯‡å°è¯´ç±»å‹
export interface ShortNovel {
  id: number
  title: string
  blurb: string
  shortNovelGenre: string | null
  wordCount: number
  viewCount: number
  likeCount: number
  averageRating: number | null
  totalRatings: number
  authorId: string
  authorName: string
  isShortNovel: boolean
  createdAt: string
  chapters?: Chapter[]
}

// ç« èŠ‚ç±»å‹
export interface Chapter {
  id: number
  title: string
  content: string
  chapterNumber: number
  wordCount: number
}

// è¯„åˆ†ç±»å‹
export interface Rating {
  id: string
  score: number // 2, 4, 6, 8, 10
  review: string | null
  likeCount: number
  userId: string
  user: {
    id: string
    name: string | null
    avatar: string | null
  }
  createdAt: string
}

// æ®µè½è¯„è®ºç±»å‹
export interface ParagraphComment {
  id: string
  content: string
  paragraphIndex: number
  likeCount: number
  replyCount: number
  userId: string
  user: {
    id: string
    name: string | null
    avatar: string | null
    level: number
  }
  createdAt: string
}

// é€šçŸ¥ç±»å‹
export interface Notification {
  id: string
  type: 'NEW_FOLLOWER' | 'NEW_LIKE' | 'NEW_COMMENT' | 'NEW_STORY'
  title: string
  content: string
  isRead: boolean
  data: Record<string, any>
  createdAt: string
}
```

---

## å¼€å‘é˜¶æ®µè¯¦è§£

### Phase 1: é¡¹ç›®æ­å»ºä¸åŸºç¡€æ¶æ„

**å¼€å‘é¡ºåº**:
```
1. åˆ›å»º Expo é¡¹ç›®
   â””â”€â”€ npx create-expo-app@latest mobile --template blank-typescript

2. é…ç½®åŸºç¡€ä¾èµ–
   â”œâ”€â”€ å®‰è£… Expo Router
   â”œâ”€â”€ å®‰è£… NativeWind
   â”œâ”€â”€ å®‰è£…çŠ¶æ€ç®¡ç† (zustand + react-query)
   â””â”€â”€ é…ç½® TypeScript

3. æ­å»ºå¯¼èˆªæ¶æ„
   â”œâ”€â”€ åˆ›å»º app/_layout.tsx (æ ¹å¸ƒå±€)
   â”œâ”€â”€ åˆ›å»º app/(tabs)/_layout.tsx (Tabå¯¼èˆª)
   â””â”€â”€ åˆ›å»º 5 ä¸ª Tab é¡µé¢å ä½

4. å°è£… API å®¢æˆ·ç«¯
   â”œâ”€â”€ åˆ›å»º lib/api/client.ts
   â”œâ”€â”€ å®ç°è¯·æ±‚æ‹¦æˆªå™¨
   â”œâ”€â”€ å®ç° Token ç®¡ç†
   â””â”€â”€ åˆ›å»ºåŸºç¡€ API æ–¹æ³• (get/post/put/delete)

5. å¤åˆ¶å¯å¤ç”¨ä»£ç 
   â”œâ”€â”€ ä» web å¤åˆ¶ format.ts
   â”œâ”€â”€ ä» web å¤åˆ¶ constants.ts
   â”œâ”€â”€ ä» web å¤åˆ¶ validators.ts (ç§»é™¤æµè§ˆå™¨ç›¸å…³)
   â””â”€â”€ åˆ›å»ºç±»å‹å®šä¹‰æ–‡ä»¶
```

**éœ€è¦æµ‹è¯•** ğŸ§ª:
- [ ] API å®¢æˆ·ç«¯åŸºç¡€è¯·æ±‚
- [ ] å¯¼èˆªè·³è½¬æ­£å¸¸
- [ ] NativeWind æ ·å¼ç”Ÿæ•ˆ

---

### Phase 2: è®¤è¯ç³»ç»Ÿ

**å¼€å‘é¡ºåº**:
```
1. åˆ›å»ºè®¤è¯çŠ¶æ€ç®¡ç†
   â””â”€â”€ stores/authStore.ts (zustand)

2. å®ç° Token å­˜å‚¨
   â”œâ”€â”€ ä½¿ç”¨ expo-secure-store å­˜å‚¨ token
   â””â”€â”€ å®ç° token æŒä¹…åŒ–

3. å®ç°é‚®ç®±ç™»å½•/æ³¨å†Œ
   â”œâ”€â”€ åˆ›å»º app/auth/login.tsx
   â”œâ”€â”€ åˆ›å»º app/auth/register.tsx
   â”œâ”€â”€ ä½¿ç”¨ react-hook-form + zod éªŒè¯
   â””â”€â”€ è°ƒç”¨ç°æœ‰ API: POST /api/auth/register

4. å®ç° Google ç™»å½•
   â”œâ”€â”€ é…ç½® expo-auth-session
   â”œâ”€â”€ é…ç½® Google Cloud Console
   â””â”€â”€ å®ç° OAuth æµç¨‹

5. å®ç° Apple ç™»å½• (iOS å¿…é¡»)
   â”œâ”€â”€ é…ç½® expo-apple-authentication
   â”œâ”€â”€ é…ç½® Apple Developer Console
   â””â”€â”€ å®ç° Sign in with Apple

6. å®ç°ç™»å‡ºåŠŸèƒ½
   â””â”€â”€ æ¸…é™¤ token + é‡ç½®çŠ¶æ€

7. å®ç°æ¸¸å®¢æ¨¡å¼
   â”œâ”€â”€ å…è®¸æµè§ˆä½†é™åˆ¶æ“ä½œ
   â””â”€â”€ æ˜¾ç¤ºç™»å½•æç¤º
```

**éœ€è¦æµ‹è¯•** ğŸ§ª:
- [ ] é‚®ç®±æ³¨å†Œæµç¨‹
- [ ] é‚®ç®±ç™»å½•æµç¨‹
- [ ] Google ç™»å½• (éœ€è¦çœŸæœºæµ‹è¯•)
- [ ] Apple ç™»å½• (éœ€è¦ iOS çœŸæœºæµ‹è¯•)
- [ ] Token æŒä¹…åŒ– (å…³é—­Appåé‡å¼€)
- [ ] ç™»å‡ºåçŠ¶æ€æ¸…ç†
- [ ] æ¸¸å®¢æ¨¡å¼é™åˆ¶

---

### Phase 3: For You æ¨èé¡µ

**å¼€å‘é¡ºåº**:
```
1. åˆ›å»ºæ•…äº‹å¡ç‰‡ç»„ä»¶
   â”œâ”€â”€ components/story/StoryCard.tsx
   â”œâ”€â”€ æ˜¾ç¤ºæ ‡é¢˜ã€ä½œè€…ã€é¢„è§ˆ
   â”œâ”€â”€ æ˜¾ç¤ºè¯„åˆ†ã€é˜…è¯»æ—¶é—´
   â””â”€â”€ å³ä¾§æ“ä½œæ  (ç‚¹èµ/è¯„è®º/æ”¶è—/åˆ†äº«)

2. å®ç°å‚ç›´æ»‘åŠ¨æµè§ˆ
   â”œâ”€â”€ ä½¿ç”¨ FlatList + pagingEnabled
   â”œâ”€â”€ å®ç°æ— é™æ»šåŠ¨åŠ è½½
   â””â”€â”€ å®ç°ä¸‹æ‹‰åˆ·æ–°

3. å®ç°ç‚¹èµåŠŸèƒ½
   â”œâ”€â”€ è°ƒç”¨ API: POST /api/shorts/[id]/recommend
   â”œâ”€â”€ ä¹è§‚æ›´æ–° UI
   â””â”€â”€ ç™»å½•æ£€æŸ¥

4. å®ç°æ”¶è—åŠŸèƒ½
   â”œâ”€â”€ è°ƒç”¨ API: POST /api/library
   â”œâ”€â”€ ä¹è§‚æ›´æ–° UI
   â””â”€â”€ ç™»å½•æ£€æŸ¥

5. å®ç°åˆ†äº«åŠŸèƒ½
   â””â”€â”€ ä½¿ç”¨ expo-sharing

6. å®ç°æœç´¢å…¥å£
   â”œâ”€â”€ åˆ›å»º app/search.tsx
   â”œâ”€â”€ è°ƒç”¨ API: GET /api/search
   â””â”€â”€ æœç´¢å»ºè®®: GET /api/search/suggestions
```

**éœ€è¦æµ‹è¯•** ğŸ§ª:
- [ ] æ•…äº‹åˆ—è¡¨åŠ è½½
- [ ] æ»‘åŠ¨åˆ‡æ¢æµç•…åº¦
- [ ] æ— é™æ»šåŠ¨åŠ è½½
- [ ] ä¸‹æ‹‰åˆ·æ–°
- [ ] ç‚¹èµäº¤äº’ (ç™»å½•/æœªç™»å½•)
- [ ] æ”¶è—äº¤äº’ (ç™»å½•/æœªç™»å½•)
- [ ] åˆ†äº«åŠŸèƒ½
- [ ] æœç´¢åŠŸèƒ½

---

### Phase 4: é˜…è¯»å™¨

**å¼€å‘é¡ºåº**:
```
1. åˆ›å»ºé˜…è¯»å™¨é¡µé¢
   â””â”€â”€ app/reader/[id].tsx

2. åˆ›å»ºé˜…è¯»è®¾ç½®çŠ¶æ€
   â””â”€â”€ stores/readerStore.ts (æŒä¹…åŒ–)

3. å®ç°é˜…è¯»å†…å®¹æ˜¾ç¤º
   â”œâ”€â”€ è°ƒç”¨ API: GET /api/shorts/[id]
   â””â”€â”€ æ¸²æŸ“æ•…äº‹å†…å®¹

4. å®ç°é˜…è¯»è®¾ç½®
   â”œâ”€â”€ components/reader/ReaderSettings.tsx
   â”œâ”€â”€ å­—ä½“å¤§å°è°ƒèŠ‚
   â”œâ”€â”€ èƒŒæ™¯é¢œè‰²åˆ‡æ¢ (ç™½/ç±³/ç°/é»‘)
   â”œâ”€â”€ è¡Œé—´è·è°ƒèŠ‚
   â””â”€â”€ è®¾ç½®æŒä¹…åŒ–åˆ° AsyncStorage

5. å®ç°æ®µè½è¯„è®º
   â”œâ”€â”€ æ¯ä¸ªæ®µè½æœ«å°¾æ˜¾ç¤ºè¯„è®ºæŒ‰é’®
   â”œâ”€â”€ è°ƒç”¨ API: GET /api/paragraph-comments
   â”œâ”€â”€ è°ƒç”¨ API: POST /api/paragraph-comments
   â””â”€â”€ components/reader/ParagraphComments.tsx

6. å®ç°è¯„åˆ†åŠŸèƒ½
   â”œâ”€â”€ åº•éƒ¨èœå•è¯„åˆ†å…¥å£
   â”œâ”€â”€ é˜…è¯»ç»“æŸè¯„åˆ†å¼¹çª—
   â”œâ”€â”€ è°ƒç”¨ API: POST /api/novels/[id]/rate
   â””â”€â”€ components/reader/RatingModal.tsx

7. å®ç°é˜…è¯»è¿›åº¦ä¿å­˜
   â”œâ”€â”€ ä¿å­˜æ»šåŠ¨ä½ç½®åˆ°æœ¬åœ°
   â””â”€â”€ ä¸‹æ¬¡æ‰“å¼€æ¢å¤ä½ç½®
```

**éœ€è¦æµ‹è¯•** ğŸ§ª:
- [ ] å†…å®¹æ­£ç¡®åŠ è½½
- [ ] æ»šåŠ¨é˜…è¯»æµç•…
- [ ] å­—ä½“å¤§å°è°ƒèŠ‚ç”Ÿæ•ˆ
- [ ] èƒŒæ™¯é¢œè‰²åˆ‡æ¢ç”Ÿæ•ˆ
- [ ] è®¾ç½®æŒä¹…åŒ–
- [ ] æ®µè½è¯„è®ºåŠ è½½
- [ ] å‘è¡¨æ®µè½è¯„è®º
- [ ] è¯„åˆ†æäº¤
- [ ] é‡å¤è¯„åˆ†æç¤º
- [ ] é˜…è¯»è¿›åº¦ä¿å­˜/æ¢å¤

---

### Phase 5: åˆ›ä½œåŠŸèƒ½

**å¼€å‘é¡ºåº**:
```
1. åˆ›å»ºæˆ‘çš„ä½œå“é¡µé¢
   â””â”€â”€ app/(tabs)/create.tsx

2. å®ç°ä½œå“åˆ—è¡¨
   â”œâ”€â”€ è°ƒç”¨ API: GET /api/mobile/my-stories
   â”œâ”€â”€ æ˜¾ç¤ºè‰ç¨¿/å·²å‘å¸ƒçŠ¶æ€
   â””â”€â”€ æ˜¾ç¤ºé˜…è¯»é‡/ç‚¹èµæ•°

3. åˆ›å»ºæ–°å»ºæ•…äº‹é¡µé¢
   â””â”€â”€ app/create/new.tsx

4. å®ç°æ ‡é¢˜è¾“å…¥
   â”œâ”€â”€ ä½¿ç”¨ react-hook-form
   â””â”€â”€ Zod éªŒè¯ (å¤ç”¨ web çš„ schema)

5. å®ç°åˆ†ç±»é€‰æ‹©
   â”œâ”€â”€ ä» constants.ts è¯»å–åˆ†ç±»åˆ—è¡¨
   â””â”€â”€ components/create/CategoryPicker.tsx

6. å®ç°å†…å®¹ç¼–è¾‘å™¨
   â”œâ”€â”€ components/create/Editor.tsx
   â”œâ”€â”€ å¯Œæ–‡æœ¬ç¼–è¾‘ (åŠ ç²—/æ–œä½“)
   â”œâ”€â”€ å®æ—¶å­—æ•°ç»Ÿè®¡
   â””â”€â”€ è‡ªåŠ¨ä¿å­˜è‰ç¨¿ (æœ¬åœ°)

7. å®ç°å°é¢ä¸Šä¼  (å¯é€‰)
   â”œâ”€â”€ ä½¿ç”¨ expo-image-picker
   â”œâ”€â”€ å›¾ç‰‡å‹ç¼©
   â””â”€â”€ ä¸Šä¼ åˆ°æœåŠ¡å™¨

8. å®ç°å‘å¸ƒ/å­˜è‰ç¨¿
   â”œâ”€â”€ è°ƒç”¨ API: POST /api/mobile/stories
   â””â”€â”€ å‘å¸ƒæˆåŠŸè·³è½¬

9. å®ç°ç¼–è¾‘å·²æœ‰ä½œå“
   â””â”€â”€ app/create/[id]/edit.tsx
```

**éœ€è¦æµ‹è¯•** ğŸ§ª:
- [ ] æˆ‘çš„ä½œå“åˆ—è¡¨åŠ è½½
- [ ] æ–°å»ºæ•…äº‹æµç¨‹å®Œæ•´
- [ ] æ ‡é¢˜éªŒè¯
- [ ] åˆ†ç±»é€‰æ‹©
- [ ] å†…å®¹ç¼–è¾‘å™¨åŠŸèƒ½
- [ ] å­—æ•°ç»Ÿè®¡å‡†ç¡®
- [ ] è‰ç¨¿è‡ªåŠ¨ä¿å­˜
- [ ] å°é¢ä¸Šä¼ 
- [ ] å‘å¸ƒæˆåŠŸ
- [ ] ç¼–è¾‘å·²æœ‰ä½œå“

---

### Phase 6: å…³æ³¨ç³»ç»Ÿ

**å¼€å‘é¡ºåº**:
```
1. åˆ›å»º Following é¡µé¢
   â””â”€â”€ app/(tabs)/following.tsx

2. å®ç°å…³æ³¨åŠ¨æ€åˆ—è¡¨
   â”œâ”€â”€ è°ƒç”¨ API: GET /api/mobile/following-updates
   â””â”€â”€ æ—¶é—´çº¿å½¢å¼å±•ç¤º

3. åˆ›å»ºä½œè€…ä¸»é¡µ
   â”œâ”€â”€ app/author/[id].tsx
   â”œâ”€â”€ æ˜¾ç¤ºä½œè€…ä¿¡æ¯
   â”œâ”€â”€ æ˜¾ç¤ºä½œè€…ä½œå“åˆ—è¡¨
   â””â”€â”€ å…³æ³¨/å–å…³æŒ‰é’®

4. å®ç°å…³æ³¨/å–å…³
   â”œâ”€â”€ è°ƒç”¨ API: POST /api/user/follow
   â”œâ”€â”€ è°ƒç”¨ API: DELETE /api/user/follow
   â””â”€â”€ ä¹è§‚æ›´æ–° UI

5. å®ç°æœªè¯»æ ‡è®°
   â””â”€â”€ æ ¹æ®æœ€åæŸ¥çœ‹æ—¶é—´è®¡ç®—
```

**éœ€è¦æµ‹è¯•** ğŸ§ª:
- [ ] å…³æ³¨åŠ¨æ€åˆ—è¡¨åŠ è½½
- [ ] ä½œè€…ä¸»é¡µæ˜¾ç¤º
- [ ] å…³æ³¨åŠŸèƒ½
- [ ] å–æ¶ˆå…³æ³¨åŠŸèƒ½
- [ ] æœªè¯»æ ‡è®°æ˜¾ç¤º

---

### Phase 7: ä¹¦æ¶ä¸ä¸ªäººä¸­å¿ƒ

**å¼€å‘é¡ºåº**:
```
1. åˆ›å»ºä¹¦æ¶é¡µé¢
   â””â”€â”€ app/(tabs)/bookshelf.tsx

2. å®ç°æ”¶è—åˆ—è¡¨
   â”œâ”€â”€ è°ƒç”¨ API: GET /api/library
   â””â”€â”€ æ”¯æŒç§»é™¤æ”¶è—

3. å®ç°é˜…è¯»å†å²
   â”œâ”€â”€ è°ƒç”¨ API: GET /api/reading-history
   â””â”€â”€ æ˜¾ç¤ºé˜…è¯»è¿›åº¦

4. åˆ›å»ºä¸ªäººä¸­å¿ƒé¡µé¢
   â””â”€â”€ app/(tabs)/profile.tsx

5. å®ç°ä¸ªäººèµ„æ–™ç¼–è¾‘
   â”œâ”€â”€ app/settings/profile.tsx
   â”œâ”€â”€ è°ƒç”¨ API: PUT /api/profile
   â””â”€â”€ å¤´åƒä¸Šä¼ : POST /api/profile/avatar

6. å®ç°é˜…è¯»/åˆ›ä½œç»Ÿè®¡
   â””â”€â”€ è°ƒç”¨ API: GET /api/profile/stats

7. åˆ›å»ºè®¾ç½®é¡µé¢
   â”œâ”€â”€ app/settings/index.tsx
   â”œâ”€â”€ é€šçŸ¥è®¾ç½®å…¥å£
   â””â”€â”€ è´¦å·è®¾ç½®
```

**éœ€è¦æµ‹è¯•** ğŸ§ª:
- [ ] æ”¶è—åˆ—è¡¨åŠ è½½
- [ ] ç§»é™¤æ”¶è—
- [ ] é˜…è¯»å†å²æ˜¾ç¤º
- [ ] ä¸ªäººèµ„æ–™ç¼–è¾‘
- [ ] å¤´åƒä¸Šä¼ 
- [ ] ç»Ÿè®¡æ•°æ®æ˜¾ç¤º

---

### Phase 8: æ¨é€é€šçŸ¥ç³»ç»Ÿ

**å¼€å‘é¡ºåº**:
```
1. é…ç½®æ¨é€æƒé™
   â”œâ”€â”€ å®‰è£… expo-notifications
   â””â”€â”€ å®‰è£… expo-device

2. è·å–æ¨é€ Token
   â”œâ”€â”€ iOS: APNs Token
   â””â”€â”€ Android: FCM Token

3. ä¸Šä¼  Token åˆ°æœåŠ¡å™¨
   â””â”€â”€ è°ƒç”¨ API: POST /api/mobile/push-token

4. åˆ›å»ºé€šçŸ¥æœåŠ¡
   â””â”€â”€ services/notification.ts

5. å®ç°å‰å°é€šçŸ¥å¤„ç†
   â””â”€â”€ App å†…æ˜¾ç¤ºé€šçŸ¥

6. å®ç°åå°é€šçŸ¥å¤„ç†
   â””â”€â”€ ç‚¹å‡»é€šçŸ¥è·³è½¬

7. åˆ›å»ºé€šçŸ¥ä¸­å¿ƒé¡µé¢
   â”œâ”€â”€ app/notifications.tsx
   â”œâ”€â”€ è°ƒç”¨ API: GET /api/notifications
   â””â”€â”€ æ ‡è®°å·²è¯»

8. å®ç°é€šçŸ¥è®¾ç½®
   â”œâ”€â”€ app/settings/notifications.tsx
   â””â”€â”€ è°ƒç”¨ API: PUT /api/notifications/preferences
```

**éœ€è¦æµ‹è¯•** ğŸ§ª:
- [ ] æ¨é€æƒé™è¯·æ±‚
- [ ] Token è·å– (éœ€çœŸæœº)
- [ ] å‰å°æ”¶åˆ°é€šçŸ¥
- [ ] åå°æ”¶åˆ°é€šçŸ¥
- [ ] ç‚¹å‡»é€šçŸ¥è·³è½¬æ­£ç¡®
- [ ] é€šçŸ¥ä¸­å¿ƒåˆ—è¡¨
- [ ] æ ‡è®°å·²è¯»
- [ ] é€šçŸ¥è®¾ç½®ç”Ÿæ•ˆ

---

### Phase 9: ä¼˜åŒ–ä¸ä¸Šæ¶

**å¼€å‘é¡ºåº**:
```
1. æ€§èƒ½ä¼˜åŒ–
   â”œâ”€â”€ å›¾ç‰‡æ‡’åŠ è½½ä¼˜åŒ–
   â”œâ”€â”€ åˆ—è¡¨è™šæ‹ŸåŒ–
   â”œâ”€â”€ å‡å°‘é‡æ¸²æŸ“
   â””â”€â”€ ç½‘ç»œè¯·æ±‚ç¼“å­˜

2. é”™è¯¯å¤„ç†
   â”œâ”€â”€ å…¨å±€é”™è¯¯è¾¹ç•Œ
   â”œâ”€â”€ ç½‘ç»œé”™è¯¯æç¤º
   â””â”€â”€ ç¦»çº¿æ¨¡å¼æ”¯æŒ

3. å‡†å¤‡ä¸Šæ¶èµ„æº
   â”œâ”€â”€ App å›¾æ ‡ (å¤šå°ºå¯¸)
   â”œâ”€â”€ å¯åŠ¨ç”»é¢
   â”œâ”€â”€ å•†åº—æˆªå›¾
   â”œâ”€â”€ éšç§æ”¿ç­–é¡µé¢
   â””â”€â”€ åº”ç”¨æè¿°

4. æ„å»ºæµ‹è¯•ç‰ˆæœ¬
   â”œâ”€â”€ eas build --profile preview
   â””â”€â”€ å†…éƒ¨æµ‹è¯•åˆ†å‘

5. ä¿®å¤æµ‹è¯•åé¦ˆ

6. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
   â””â”€â”€ eas build --profile production

7. æäº¤å®¡æ ¸
   â”œâ”€â”€ Google Play Console
   â””â”€â”€ App Store Connect
```

---

## æ¨é€é€šçŸ¥ç³»ç»Ÿ

### æ¨é€ç±»å‹

| ç±»å‹ | è§¦å‘æ¡ä»¶ | ä¼˜å…ˆçº§ |
|------|----------|--------|
| NEW_STORY | å…³æ³¨çš„ä½œè€…å‘å¸ƒæ–°ä½œå“ | é«˜ |
| NEW_COMMENT | æ”¶åˆ°è¯„è®ºå›å¤ | é«˜ |
| NEW_LIKE | ä½œå“æ”¶åˆ°ç‚¹èµ | ä¸­ |
| NEW_FOLLOWER | æœ‰æ–°ç²‰ä¸å…³æ³¨ | ä¸­ |
| SYSTEM | ç³»ç»Ÿå…¬å‘Š | ä½ |

### æœåŠ¡ç«¯é…ç½®

éœ€è¦åœ¨ web åç«¯æ·»åŠ ä»¥ä¸‹ APIï¼š

```typescript
// POST /api/mobile/push-token
// æ³¨å†Œæ¨é€ Token
Body: {
  token: string,           // æ¨é€ Token
  platform: 'ios' | 'android',
  deviceId: string         // è®¾å¤‡å”¯ä¸€æ ‡è¯†
}

// PUT /api/notifications/preferences
// æ›´æ–°é€šçŸ¥åå¥½
Body: {
  newStory: boolean,       // å…³æ³¨ä½œè€…æ–°ä½œå“
  newComment: boolean,     // æ–°è¯„è®º
  newLike: boolean,        // æ–°ç‚¹èµ
  newFollower: boolean,    // æ–°ç²‰ä¸
  system: boolean          // ç³»ç»Ÿé€šçŸ¥
}
```

### ç§»åŠ¨ç«¯å®ç°

```typescript
// services/notification.ts
import * as Notifications from 'expo-notifications'
import * as Device from 'expo-device'
import { Platform } from 'react-native'
import { api } from '@/lib/api/client'

class NotificationService {
  async init() {
    // 1. è¯·æ±‚æƒé™
    const { status } = await Notifications.requestPermissionsAsync()
    if (status !== 'granted') {
      console.log('Notification permission denied')
      return
    }

    // 2. è·å–æ¨é€ Token
    if (Device.isDevice) {
      const token = await Notifications.getExpoPushTokenAsync({
        projectId: 'your-expo-project-id'
      })

      // 3. ä¸Šä¼ åˆ°æœåŠ¡å™¨
      await this.registerToken(token.data)
    }

    // 4. é…ç½®å‰å°é€šçŸ¥å¤„ç†
    Notifications.setNotificationHandler({
      handleNotification: async () => ({
        shouldShowAlert: true,
        shouldPlaySound: true,
        shouldSetBadge: true,
      }),
    })
  }

  async registerToken(token: string) {
    const deviceId = await this.getDeviceId()
    await api.post('/mobile/push-token', {
      token,
      platform: Platform.OS,
      deviceId,
    })
  }

  // ç›‘å¬é€šçŸ¥ç‚¹å‡»
  addNotificationResponseListener(
    handler: (notification: Notifications.NotificationResponse) => void
  ) {
    return Notifications.addNotificationResponseReceivedListener(handler)
  }

  private async getDeviceId(): Promise<string> {
    // ä½¿ç”¨ expo-device æˆ–å…¶ä»–æ–¹å¼è·å–è®¾å¤‡å”¯ä¸€æ ‡è¯†
    return Device.modelId || 'unknown'
  }
}

export const notificationService = new NotificationService()
```

### é€šçŸ¥ç‚¹å‡»è·³è½¬

```typescript
// åœ¨ App å…¥å£é…ç½®
useEffect(() => {
  const subscription = notificationService.addNotificationResponseListener(
    (response) => {
      const data = response.notification.request.content.data

      switch (data.type) {
        case 'NEW_STORY':
          router.push(`/reader/${data.storyId}`)
          break
        case 'NEW_COMMENT':
          router.push(`/reader/${data.storyId}?comment=${data.commentId}`)
          break
        case 'NEW_FOLLOWER':
          router.push(`/author/${data.userId}`)
          break
        default:
          router.push('/notifications')
      }
    }
  )

  return () => subscription.remove()
}, [])
```

---

## æµ‹è¯•ç­–ç•¥

### æµ‹è¯•è¦†ç›–ç‡è¦æ±‚ ğŸ§ª

| æ¨¡å— | è¦†ç›–ç‡ç›®æ ‡ | ä¼˜å…ˆçº§ |
|------|------------|--------|
| `stores/` (çŠ¶æ€ç®¡ç†) | â‰¥ 90% | ğŸ”´ é«˜ |
| `lib/api/` (API å®¢æˆ·ç«¯) | â‰¥ 85% | ğŸ”´ é«˜ |
| `lib/utils/` (å·¥å…·å‡½æ•°) | â‰¥ 95% | ğŸŸ¡ ä¸­ |
| `hooks/` (è‡ªå®šä¹‰ Hooks) | â‰¥ 80% | ğŸŸ¡ ä¸­ |
| UI ç»„ä»¶ | æ‰‹åŠ¨æµ‹è¯•ä¸ºä¸» | - |

### å¿…é¡»å†™å•å…ƒæµ‹è¯•çš„åŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | æµ‹è¯•å†…å®¹ |
|----------|----------|
| **è®¤è¯ç³»ç»Ÿ** | login/logout/tokenåˆ·æ–°/çŠ¶æ€æŒä¹…åŒ– |
| **API å®¢æˆ·ç«¯** | è¯·æ±‚æ‹¦æˆªå™¨/é”™è¯¯å¤„ç†/é‡è¯•æœºåˆ¶/Tokenæ³¨å…¥ |
| **çŠ¶æ€ç®¡ç†** | authStore/readerStore æ‰€æœ‰çŠ¶æ€å˜åŒ– |
| **å·¥å…·å‡½æ•°** | formatNumber/formatDate/validators |
| **è¡¨å•éªŒè¯** | ç™»å½•/æ³¨å†Œ/åˆ›ä½œè¡¨å•çš„Zod schema |

### å¿…é¡»çœŸæœºæµ‹è¯•çš„åŠŸèƒ½

| åŠŸèƒ½ | æµ‹è¯•è¦ç‚¹ | åŸå›  |
|------|----------|------|
| Google ç™»å½• | OAuth å®Œæ•´æµç¨‹ | æ¨¡æ‹Ÿå™¨é™åˆ¶ |
| Apple ç™»å½• | Sign in with Apple | iOS çœŸæœºå¿…é¡» |
| æ¨é€é€šçŸ¥ | å‰å°/åå°/ç‚¹å‡»è·³è½¬ | æ¨¡æ‹Ÿå™¨ä¸æ”¯æŒ |
| å…¨å±æ»‘åŠ¨ | æµç•…åº¦ã€è¾¹ç•Œ | æ€§èƒ½ç›¸å…³ |
| æ¯›ç»ç’ƒæ•ˆæœ | æ¸²æŸ“æ€§èƒ½ | è§†è§‰æ•ˆæœ |
| æ‰‹åŠ¿æ“ä½œ | æ»‘åŠ¨/é•¿æŒ‰/åŒå‡» | è§¦æ§ç›¸å…³ |

### æµ‹è¯•åˆ†ç±»

| ç±»å‹ | å·¥å…· | è¯´æ˜ |
|------|------|------|
| å•å…ƒæµ‹è¯• | Jest | æµ‹è¯•å·¥å…·å‡½æ•°ã€Hooks |
| ç»„ä»¶æµ‹è¯• | React Native Testing Library | æµ‹è¯• UI ç»„ä»¶ |
| E2E æµ‹è¯• | Detox | ç«¯åˆ°ç«¯æµ‹è¯•æµç¨‹ |
| æ‰‹åŠ¨æµ‹è¯• | Expo Go / çœŸæœº | çœŸå®è®¾å¤‡æµ‹è¯• |

### å¼€å‘è¿‡ç¨‹ä¸­çš„æµ‹è¯•æµç¨‹

#### 1. æœ¬åœ°å¼€å‘æµ‹è¯•

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npx expo start

# å¿«é€Ÿæµ‹è¯•é€‰é¡¹
# æŒ‰ i - iOS æ¨¡æ‹Ÿå™¨ (éœ€è¦ Mac + Xcode)
# æŒ‰ a - Android æ¨¡æ‹Ÿå™¨ (éœ€è¦ Android Studio)
# æŒ‰ w - Web æµè§ˆå™¨ (å¿«é€Ÿé¢„è§ˆ UI)
# æ‰«ç  - ç”¨ Expo Go åœ¨çœŸæœºæµ‹è¯•
```

#### 2. åŠŸèƒ½å®Œæˆåæµ‹è¯•

æ¯å®Œæˆä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼ŒæŒ‰ä»¥ä¸‹æ£€æŸ¥æ¸…å•æµ‹è¯•ï¼š

**è®¤è¯æ¨¡å—æµ‹è¯•æ¸…å•**:
```
â–¡ æ³¨å†Œé¡µé¢èƒ½æ­£å¸¸æ‰“å¼€
â–¡ è¾“å…¥æ— æ•ˆé‚®ç®±æ˜¾ç¤ºé”™è¯¯æç¤º
â–¡ å¯†ç å°‘äº6ä½æ˜¾ç¤ºé”™è¯¯æç¤º
â–¡ æ³¨å†ŒæˆåŠŸåè·³è½¬æ­£ç¡®
â–¡ ç™»å½•æˆåŠŸå Token æ­£ç¡®ä¿å­˜
â–¡ å…³é—­ App é‡æ–°æ‰“å¼€ä»ä¿æŒç™»å½•
â–¡ ç™»å‡ºåè¿”å›ç™»å½•é¡µ
â–¡ Google ç™»å½•æµç¨‹å®Œæ•´ (çœŸæœº)
â–¡ Apple ç™»å½•æµç¨‹å®Œæ•´ (iOS çœŸæœº)
```

**API è°ƒç”¨æµ‹è¯•æ¸…å•**:
```
â–¡ ç½‘ç»œæ­£å¸¸æ—¶è¯·æ±‚æˆåŠŸ
â–¡ ç½‘ç»œæ–­å¼€æ—¶æ˜¾ç¤ºé”™è¯¯æç¤º
â–¡ Token è¿‡æœŸæ—¶è‡ªåŠ¨è·³è½¬ç™»å½•
â–¡ è¯·æ±‚è¶…æ—¶æœ‰åˆç†æç¤º
```

#### 3. çœŸæœºæµ‹è¯•

```bash
# æ„å»ºå¼€å‘ç‰ˆæœ¬å®‰è£…åˆ°çœŸæœº
eas build --profile development --platform ios
eas build --profile development --platform android

# æˆ–ä½¿ç”¨ Expo Go
# æ‰‹æœºä¸‹è½½ Expo Go Appï¼Œæ‰«æç»ˆç«¯äºŒç»´ç 
```

**å¿…é¡»åœ¨çœŸæœºæµ‹è¯•çš„åŠŸèƒ½**:
- Google/Apple ç™»å½•
- æ¨é€é€šçŸ¥
- ç›¸æœº/ç›¸å†Œæƒé™
- æ‰‹åŠ¿æ“ä½œæµç•…åº¦
- æ€§èƒ½è¡¨ç°

#### 4. å•å…ƒæµ‹è¯•ç¤ºä¾‹

```typescript
// __tests__/lib/format.test.ts
import { formatNumber } from '@/lib/utils/format'

describe('formatNumber', () => {
  it('should return number as string for values under 1000', () => {
    expect(formatNumber(0)).toBe('0')
    expect(formatNumber(100)).toBe('100')
    expect(formatNumber(999)).toBe('999')
  })

  it('should format thousands with k suffix', () => {
    expect(formatNumber(1000)).toBe('1k')
    expect(formatNumber(1500)).toBe('1.5k')
    expect(formatNumber(15000)).toBe('15k')
  })

  it('should format millions with m suffix', () => {
    expect(formatNumber(1000000)).toBe('1m')
    expect(formatNumber(1500000)).toBe('1.5m')
  })
})
```

#### 5. ç»„ä»¶æµ‹è¯•ç¤ºä¾‹

```typescript
// __tests__/components/StoryCard.test.tsx
import { render, fireEvent } from '@testing-library/react-native'
import { StoryCard } from '@/components/story/StoryCard'

describe('StoryCard', () => {
  const mockStory = {
    id: 1,
    title: 'Test Story',
    blurb: 'Test blurb...',
    authorName: 'Test Author',
    likeCount: 100,
    commentCount: 50,
  }

  it('should render story title', () => {
    const { getByText } = render(<StoryCard story={mockStory} />)
    expect(getByText('Test Story')).toBeTruthy()
  })

  it('should call onPress when tapped', () => {
    const onPress = jest.fn()
    const { getByTestId } = render(
      <StoryCard story={mockStory} onPress={onPress} />
    )
    fireEvent.press(getByTestId('story-card'))
    expect(onPress).toHaveBeenCalled()
  })

  it('should format like count correctly', () => {
    const { getByText } = render(<StoryCard story={mockStory} />)
    expect(getByText('100')).toBeTruthy()
  })
})
```

### æµ‹è¯•å‘½ä»¤

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm test -- format.test.ts

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm test -- --coverage

# ç›‘å¬æ¨¡å¼ (å¼€å‘æ—¶ä½¿ç”¨)
npm test -- --watch
```

---

## API è®¾è®¡

### ç§»åŠ¨ç«¯ä¸“ç”¨ API (éœ€è¦æ–°å¢)

```typescript
// For You æ¨è
GET /api/mobile/for-you
Query: { page, limit, tags? }
Response: { stories: Story[], nextPage: number }

// å…³æ³¨åŠ¨æ€
GET /api/mobile/following-updates
Query: { page, limit }
Response: { updates: Update[], nextPage: number }

// åˆ›å»ºæ•…äº‹
POST /api/mobile/stories
Body: {
  title: string,
  content: string,
  coverImage?: string,
  tags: string[],
  categoryId: number,
  isDraft: boolean
}

// è·å–æˆ‘çš„ä½œå“
GET /api/mobile/my-stories
Query: { page, limit, status?: 'published' | 'draft' }

// æ¨é€ Token
POST /api/mobile/push-token
Body: { token, platform, deviceId }
```

### å¤ç”¨ç°æœ‰ API

```typescript
// æ”¶è—
POST /api/library
DELETE /api/library

// è¯„åˆ†
POST /api/novels/:id/rate
GET /api/novels/:id/ratings

// æ®µè½è¯„è®º
GET /api/paragraph-comments
POST /api/paragraph-comments

// å…³æ³¨
POST /api/user/follow
DELETE /api/user/follow

// æœç´¢
GET /api/search

// é€šçŸ¥
GET /api/notifications
POST /api/notifications/:id/read

// ä¸ªäººèµ„æ–™
GET /api/profile
PUT /api/profile
```

---

## ä¸Šæ¶å‡†å¤‡

### Google Play

| è¦æ±‚ | è¯´æ˜ |
|------|------|
| å¼€å‘è€…è´¦å· | $25 ä¸€æ¬¡æ€§è´¹ç”¨ |
| éšç§æ”¿ç­– | å¿…é¡»æä¾› URL |
| å†…å®¹åˆ†çº§ | å¡«å†™é—®å· |
| æˆªå›¾ | è‡³å°‘ 2 å¼  |
| åŠŸèƒ½å›¾ç‰‡ | 1024 x 500 |
| åº”ç”¨å›¾æ ‡ | 512 x 512 |
| App Bundle | .aab æ ¼å¼ |

### App Store

| è¦æ±‚ | è¯´æ˜ |
|------|------|
| å¼€å‘è€…è´¦å· | $99/å¹´ |
| Sign in with Apple | **å¿…é¡»å®ç°** |
| éšç§æ”¿ç­– | å¿…é¡»æä¾› URL |
| App Privacy | æ•°æ®æ”¶é›†å£°æ˜ |
| æˆªå›¾ | å¤šå°ºå¯¸ (6.7", 6.5", 5.5") |
| åº”ç”¨å›¾æ ‡ | 1024 x 1024 æ— é€æ˜ |
| å¹´é¾„åˆ†çº§ | å†…å®¹é—®å· |

### å®¡æ ¸æ³¨æ„äº‹é¡¹

**å¸¸è§æ‹’ç»åŸå› **:
1. ç¼ºå°‘ Sign in with Apple (iOS)
2. éšç§æ”¿ç­–ä¸å®Œæ•´
3. åŠŸèƒ½ä¸å®Œæ•´æˆ–å´©æºƒ
4. æˆªå›¾ä¸å®é™…ä¸ç¬¦
5. ç¼ºå°‘å†…å®¹ä¸¾æŠ¥æœºåˆ¶

---

**è®©çŸ­ç¯‡é˜…è¯»è§¦æ‰‹å¯åŠï¼Œè®©åˆ›ä½œäººäººå¯ä¸º**
